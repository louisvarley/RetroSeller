{% extends "base.html" %}

{% block title %}Home{% endblock %}

{% block body %}



<div class="row">
 {% for account in accounts %}
   <div class="col-sm-6 col-lg-3">

	  
	<div class="card mb-4 text-white" style="background-color:{{ account.color }}">
	   <div class="card-body pb-0 d-flex justify-content-between align-items-start">
		  <div>
			 <div class="fs-4 fw-semibold">{{ account.name }}</div>
			 <div>{{ account.balance | format_currency('GBP', {rounding_mode: 'floor'}) }}</div>
		  </div>
	   </div>
	   <div class="c-chart-wrapper mt-3 mx-3" style="height:70px;">
		  <canvas class="chart" id="{{account.id}}_accountChart" style="display: block; box-sizing: border-box; height: 70px; width: 274px;" width="274" height="70"></canvas>
	   </div>
	</div>
	  
	  
	  
   </div>
 {% endfor %}
</div>


<div class="card mb-4">
   <div class="card-body bg-primary text-white">
      <div class="d-flex justify-content-between">
         <div>
            <h4 class="card-title mb-0">Sales</h4>
            <div class="small text-medium-emphasis">Last 30 Days</div>
         </div>
        
      </div>
      <div class="c-chart-wrapper" style="height:300px;margin-top:40px;">
         <canvas class="chart" id="salesChart" style="display: block; box-sizing: border-box; height: 300px; width: 1264px;" width="1264" height="300"></canvas>
         <div class="chartjs-tooltip" style="opacity: 0; left: 729.889px; top: 351.46px;">
            <table style="margin: 0px;">
               <thead class="chartjs-tooltip-header">
                  <tr style="border-width: 0px;" class="chartjs-tooltip-header-item">
                     <th style="border-width: 0px;">T</th>
                  </tr>
               </thead>
               <tbody class="chartjs-tooltip-body">
                  <tr class="chartjs-tooltip-body-item">
                     <td style="border-width: 0px;"><span style="background: rgba(82, 153, 224, 0.1) none repeat scroll 0% 0%; border-color: rgb(82, 153, 224); border-width: 2px; margin-right: 10px; height: 10px; width: 10px; display: inline-block;"></span>My First dataset: 161</td>
                  </tr>
                  <tr class="chartjs-tooltip-body-item">
                     <td style="border-width: 0px;"><span style="background: rgba(0, 0, 0, 0.1) none repeat scroll 0% 0%; border-color: rgb(81, 150, 104); border-width: 2px; margin-right: 10px; height: 10px; width: 10px; display: inline-block;"></span>My Second dataset: 84</td>
                  </tr>
                  <tr class="chartjs-tooltip-body-item">
                     <td style="border-width: 0px;"><span style="background: rgba(0, 0, 0, 0.1) none repeat scroll 0% 0%; border-color: rgb(199, 113, 113); border-width: 2px; margin-right: 10px; height: 10px; width: 10px; display: inline-block;"></span>My Third dataset: 65</td>
                  </tr>
               </tbody>
            </table>
         </div>
      </div>
   </div>
</div>

		  
		  
		

	
<script>
var ctx = document.getElementById('salesChart');
var chart = new Chart(ctx, {
    type: 'line',
	  data: {
	  labels: [{% for key,value in salesData %}'{{key}}',{% endfor %}],
		datasets: [

		  {
			label: 'Net',
			data: [{% for key,value in salesData %}'{{value.net}}',{% endfor %}],
			showLine: true,
			fill: false,
			borderColor: 'rgba(255, 255, 255, 1)'
			}
		]
	  },	
	  options: {
		maintainAspectRatio: false,
		plugins:{   
			legend: {
				display: false
			},
			datalabels: {
				display: true,
				color: "#fff",
				formatter: function (value, context) {
					return "£" + value;
				},			
			},
		},
		scales: {
			xAxes: {
				gridLines: {
					display: false,
					color: "rgba(0,0,0,0)",
				},
				ticks: {
					fontColor: "white", 
				},
				scaleLabel:{
					fontColor: "white", 				
				}				
			},
			yAxes: {
				beginAtZero: true,
				gridLines: {
					display: false,
					color: "rgba(0,0,0,0)",
				},
				ticks: {
					fontColor: "white", 
					callback: function(value, index, values) {
						return '£' + value;
					}
				},
				scaleLabel:{
					fontColor: "white", 				
				}
			}
		}
	}
	
});

</script>


{% for account in accounts %}

<script>
var ctx = document.getElementById('{{account.id}}_accountChart');
var chart = new Chart(ctx, {
    type: 'line',
	  data: {
	  labels: [{% for transaction in account.getLatestTransactions %}'{{transaction.balance}}',{% endfor %}],
		datasets: [

		  {
			label: 'Net',
			data: [{% for transaction in account.getLatestTransactions %}'{{transaction.balance}}',{% endfor %}],
			showLine: true,
			fill: false,
			pointRadius: 0, 
			borderColor: 'rgba(255, 255, 255, 1)'
			}
		]
	  },	
	options: {
		plugins: { legend: { display: false } },
		yAxes: {beginAtZero: true},
		maintainAspectRatio: false,
		scales: { x: { grid: { display: false, drawBorder: false }, ticks: { display: false } }, y: { display: false, grid: { display: false }, ticks: { display: false } } },
		elements: { line: { borderWidth: 1, tension: 0.4 }, point: { radius: 4, hitRadius: 10, hoverRadius: 4 } },
	},
	
});

</script>


{% endfor %}


{% endblock %}


